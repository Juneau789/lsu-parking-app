<%- include('../partials/header') %>

<div class="container mt-5">
  <h1 class="text-center mb-4">Admin Panel</h1>

  <!-- Add Parking Lot Form -->
  <div class="card mb-4">
    <div class="card-header bg-dark text-white">Add New Parking Lot</div>
    <div class="card-body">
      <form action="/api/parking-lots" method="POST">
        <div class="mb-3">
          <label for="permitType" class="form-label">Permit Type</label>
          <input type="text" class="form-control" id="permitType" name="permitType" required />
        </div>
        <div class="mb-3">
          <label for="day" class="form-label">Day</label>
          <input type="text" class="form-control" id="day" name="day" required />
        </div>
        <div class="mb-3">
          <label for="lotName" class="form-label">Lot Name</label>
          <input type="text" class="form-control" id="lotName" name="lotName" required />
        </div>
        <div class="mb-3">
          <label for="lotNumber" class="form-label">Lot Number</label>
          <input type="text" class="form-control" id="lotNumber" name="lotNumber" required />
        </div>
        <div class="mb-3">
          <label for="totalSpaces" class="form-label">Total Spaces</label>
          <input type="number" class="form-control" id="totalSpaces" name="totalSpaces" required />
        </div>
        <!-- Availability Percentage Fields -->
        <div class="mb-3">
          <label for="availability7am" class="form-label">7:00 AM % Full</label>
          <input type="text" class="form-control" id="availability7am" name="availability[7:00 am]" required />
        </div>
        <div class="mb-3">
          <label for="availability11am" class="form-label">11:00 AM % Full</label>
          <input type="text" class="form-control" id="availability11am" name="availability[11:00 am]" required />
        </div>
        <div class="mb-3">
          <label for="availability2pm" class="form-label">2:00 PM % Full</label>
          <input type="text" class="form-control" id="availability2pm" name="availability[2:00 pm]" required />
        </div>
        <div class="mb-3">
          <label for="availability4pm" class="form-label">4:00 PM % Full</label>
          <input type="text" class="form-control" id="availability4pm" name="availability[4:00 pm]" required />
        </div>
        <button type="submit" class="btn btn-primary">Add Parking Lot</button>
      </form>
    </div>
  </div>

  <!-- Existing Parking Lots Table -->
  <h2 class="mb-3">Current Parking Lots</h2>
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Permit Type</th>
        <th>Day</th>
        <th>Lot Name</th>
        <th>Lot Number</th>
        <th>Total Spaces</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% parkingLots.forEach((lot) => { %>
        <tr>
          <td><%= lot.permitType %></td>
          <td><%= lot.day %></td>
          <td><%= lot.lotName %></td>
          <td><%= lot.lotNumber %></td>
          <td><%= lot.totalSpaces %></td>
          <td>
            <form action="/api/parking-lots/<%= lot._id %>?_method=DELETE" method="POST" style="display: inline;">
              <input type="hidden" name="_method" value="DELETE" />
              <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<%- include('../partials/footer') %>